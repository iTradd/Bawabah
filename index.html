<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>البوابة العقارية</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <style>
        /* خطوط */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;800&display=swap');

        /* إعدادات عامة */
        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Cairo', sans-serif;
            background-color: #F9FAFB;
            color: #333;
            direction: rtl;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Header */
        header {
            background: linear-gradient(90deg, #F96E2A, #FB8C3E);
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 28px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Navbar */
        .navbar {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 15px;
            background: #78B3CE;
            border-radius: 0 0 15px 15px;
            margin-bottom: 20px;
        }

        .navbar a {
            text-decoration: none;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            color: white;
            border-radius: 50px;
            background: #141414;
            transition: transform 0.3s ease, background-color 0.3s ease;
        }

        .navbar a:hover {
            background: white;
            color: #141414;
            transform: scale(1.1);
        }

        /* Search Section */
        .search-container {
            text-align: center;
            padding: 20px;
            background: #E3F2FD;
            border-radius: 15px;
            margin: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .search-container input {
            padding: 12px;
            width: 70%;
            max-width: 500px;
            border: 1px solid #B0BEC5;
            border-radius: 50px;
            font-size: 16px;
        }

        .search-container input::placeholder {
            color: #AAA;
        }

        .search-container button {
            padding: 12px 25px;
            margin-left: 10px;
            border: none;
            border-radius: 50px;
            background: #F96E2A;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease;
        }

        .search-container button:hover {
            background: #FB8C3E;
            transform: scale(1.1);
        }

        /* Filters Section */
        .filters {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            padding: 20px;
        }

        .filters button {
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            background: #78B3CE;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.3s ease;
        }

        .filters button:hover {
            background: #141414;
            transform: scale(1.1);
        }

              /* Properties Section */
        .properties {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            padding: 15px;
        }

        .property-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            padding: 10px;
        }

        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 22px rgba(0, 0, 0, 0.2);
        }

        .property-image img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
        }

        .property-details {
            padding: 10px;
            text-align: center;
        }

        .property-details h3 {
            font-size: 18px;
            color: #F96E2A;
            margin-bottom: 10px;
        }
        
                .property-details p {
            font-size: 14px;
            margin: 5px 0;
            color: #555;
        }

        .icon-container {
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            margin-top: 10px;
        }

        .icon-item {
            text-align: center;
            font-size: 14px;
            color: #555;
        }

        .icon-item span {
            display: block;
            font-size: 28px;
            color: #F96E2A;
            margin-bottom: 5px;
        }

        /* إعداد أيقونة المشاركة */
.share-icon {
    position: absolute; /* وضع الأيقونة بالنسبة للكرت */
    bottom: 10px; /* المسافة من الأسفل */
    left: 10px; /* المسافة من اليسار */
    font-size: 24px; /* حجم الأيقونة */
    color: #000; /* اللون الأسود */
    cursor: pointer; /* إظهار المؤشر عند المرور */
    transition: transform 0.3s ease, color 0.3s ease; /* تأثير عند التمرير */
}

.share-icon:hover {
    transform: scale(1.2); /* تكبير الأيقونة عند التمرير */
    color: #F96E2A; /* تغيير اللون عند التمرير */
}




    </style>
</head>
<body>
    <header>البوابة المتكاملة</header>

    <div class="navbar">
        <a href="Property.html">العقارات</a>
        <a href="Contract.html">العقود</a>
        <a href="Clients.html">العملاء</a>
        <a href="archive.html">الأرشيف</a>
    </div>

    <div class="search-container">
        <input type="text" id="searchQuery" placeholder="ابحث عن الموقع أو الوصف">
        <button onclick="searchProperties()">🔍 بحث</button>
    </div>

    <div class="filters">
        <button onclick="filterProperties('')">الكل</button>
        <button onclick="filterProperties('شقة')">شقة</button>
        <button onclick="filterProperties('فلة')">فلة</button>
        <button onclick="filterProperties('أرض')">أرض</button>
        <button onclick="filterProperties('دور')">دور</button>
        <button onclick="filterProperties('محل')">محل</button>
    </div>

    <div id="properties" class="properties"></div>

    <div id="loadingIndicator">
        <svg xmlns="http://www.w3.org/2000/svg" style="margin: auto; display: block;" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
            <circle cx="50" cy="50" fill="none" stroke="#F96E2A" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">
                <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="0 50 50;360 50 50"></animateTransform>
            </circle>
        </svg>
    </div>

    <script>
        const apiUrl = 'https://script.google.com/macros/s/AKfycbw2MNBeXvZGvkdwh6DCS9-BhMEkaGZNuqHjihxth_TZaYPH16GtZNjpRiLJoGdEN00/exec';

        function fetchProperties(query = '', type = '') {
            const loadingIndicator = document.getElementById('loadingIndicator');
            loadingIndicator.style.display = 'block';

            const url = `${apiUrl}?action=getProperties&sheet=Real_Estate&query=${encodeURIComponent(query)}&type=${encodeURIComponent(type)}`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    renderProperties(data);
                    loadingIndicator.style.display = 'none';
                })
                .catch(error => {
                    console.error('Error fetching properties:', error);
                    loadingIndicator.style.display = 'none';
                });
        }

        function filterProperties(type) {
            fetchProperties('', type);
        }

        function renderProperties(data) {
            const propertiesContainer = document.getElementById('properties');
            propertiesContainer.innerHTML = '';
            data.forEach(property => {
                const card = document.createElement('div');
                card.classList.add('property-card');
                card.innerHTML = `
    <div class="property-image">
                                <a href="propertyDetails.html?propertyId=${property.معرف_العقار}">
                                    <img src="${property.الصور}" alt="${property.نوع_العقار}">
                                </a>
                            </div>
                            <div class="property-details">
                                <h3>
                                    <a href="propertyDetails.html?propertyId=${property.معرف_العقار}" style="text-decoration: none; color: #F96E2A;">${property.اسم_العقار}</a>
                                </h3>
                                <div class="icon-container">
                                    <div class="icon-item">
                                        <span class="material-symbols-rounded">home_work</span>
                                        <p>${property.نوع_العقار}</p>
                                    </div>
                                    <div class="icon-item">
                                        <span class="material-symbols-rounded">pin</span>
                                        <p>${property.معرف_العقار}</p>
                                    </div>
                                    <div class="icon-item">
                                        <span class="material-symbols-rounded">payments</span>
                                        <p>${property.السعر} ريال</p>
                                    </div>
                                    <div class="icon-item">
                                        <span class="material-symbols-rounded">location_on</span>
                                        <p>${property.الموقع}</p>
                                    </div>
                                </div>
                            </div>
<div class="share-icon material-symbols-rounded" onclick="shareProperty('${property.اسم_العقار}', '${property.معرف_العقار}', '${property.الصور || ''}')">share</div>
                        `;

                propertiesContainer.appendChild(card);
            });
        }
function shareProperty(propertyName, propertyId) {
    const officeName = "البوابة المتكاملة للخدمات العقارية"; // اسم المكتب
    const url = `propertyDetails.html?propertyId=${propertyId}`;
    const fullUrl = `${window.location.origin}/${url}`;
    const message = `${officeName}\n${propertyName}\nرقم الإعلان: ${propertyId}\nرابط العقار: ${fullUrl}`;
    const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
}


        function searchProperties() {
            const query = document.getElementById('searchQuery').value;
            fetchProperties(query);
        }

        fetchProperties();
    </script>
</body>
</html>
